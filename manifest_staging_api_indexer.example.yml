applications:
- name: code-staging-api-indexer
  memory: 512M
  disk_quota: 1024M
  health-check-type: process
  buildpack: https://github.com/cloudfoundry/nodejs-buildpack
  no-route: true
  env:
    ES_AUTH:
    ES_HEAP_SIZE: 10g
    ES_HOST:
    NODE_ENV: production
    CLIENT_ID:
    CLIENT_SECRET:
    CF_STAGING_TIMEOUT: 15
    CF_STARTUP_TIMEOUT: 15
  services:
  - elastic-staging-service
  stack: cflinuxfs2
  command: node ./scripts/index/index.js | ./node_modules/bunyan/bin/bunyan